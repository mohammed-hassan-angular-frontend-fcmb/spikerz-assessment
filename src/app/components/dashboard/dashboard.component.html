<div class="dashboard-container">
  <!-- Sidebar -->
  <app-sidebar></app-sidebar>

  <!-- Main Content Area -->
  <main class="main-content" [class.sidebar-collapsed]="sidebarCollapsed()">

    <!-- Main Dashboard Content -->
    <div class="dashboard-content">
      <!-- Left column: Description & Extra -->
      <section class="left-column">
        <div class="card surface">
          <div class="card-section">
            <h2 class="section-title text-green">Description</h2>
            <p class="muted">
              Lorem ipsum dolor sit amet consectetur. Aenean sodales pellentesque gravida nibh et magna faucibus. Duis commodo ut metus amet egestas habitant viverra. Quisque morbi senectus facilisis non diam leo nulla sem pellentesque sit in vel sed cursus mattis sit fringilla vestibulum.
            </p>
          </div>
          <div class="divider"></div>
          <div class="card-section">
            <h3 class="section-title text-green">Extra</h3>
            <p class="muted">
              Lorem ipsum dolor sit amet consectetur. Tempus a id adipiscing egestas egestas tellus dis pretium tempus. Justo nisi mi lorem lectus id ornare. Rhoncus in egestas in amet porttitor pellentesque sit. Amet gravida integer velit felis. Eu consectetur interdum auctor sed aliquam. Eu pulvinar accumsan sed id. Duis a aliquam eu quisque commodo lectus. Lectus ipsum velit purus viverra vulputate viverra in nunc nullam. Euismod rhoncus mauris urna orci gravida sagittis netus. Atmo mus iu velit etiam. Interdum habitant congue massa in etiam sit. Commodo nibh viverra lobortis augue lorem quam lorem suspendisse.
            </p>
          </div>
          <div class="kv-list">
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">10/19/2017</span></div>
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">Ut</span></div>
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">Eros</span></div>
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">âœ“ Yes</span></div>
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">Sit</span></div>
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">Lorem Ipsum Dolor</span></div>
            <div class="kv-item"><span class="kv-key">Lorem Ipsum Dolor</span><span class="kv-val">Lorem Ipsum Dolor</span></div>
            <div class="kv-item full"><span class="kv-key">Lorem Ipsum Dolor Sit</span></div>
          </div>
        </div>
      </section>
        <!-- Right column: Graph on top, assets + risk below -->
        <section class="right-column">
          <div class="card p-6">
            <div class="card-section">
                <h2 class="panel-title text-green">Lorem Lorem Lorem</h2>
              </div>
            <!-- Graph card -->
            <div class="card graph-card">
              <div class="diagram-container">
                <div class="nodes-container">
                  <!-- Node 1 -->
                  <div class="node node-1" (mouseenter)="showNodeTooltip = true" (mouseleave)="showNodeTooltip = false">
                    <div class="node-icon user">
                      <div class="status-indicator success"></div>
                    </div>
                    <div class="node-label">Loremipsumm</div>

                    <!-- Hover Card with Backdrop -->
                    <div class="tooltip-backdrop" *ngIf="showNodeTooltip">
                      <div class="node-tooltip">
                        <div class="tooltip-header">
                          <h4>Lorem Ipsum Dolor Sit</h4>
                        </div>
                        <div class="tooltip-content">
                          <div class="version-grid">
                            <div class="version-item red">1.2.3.4</div>
                            <div class="version-item red">1.2.3.4</div>
                            <div class="version-item red">1.2.3.4</div>
                            <div class="version-item red">1.2.3.4</div>
                            <div class="version-item red">1.2.3.4</div>
                            <div class="version-item red">1.2.3.4</div>
                          </div>
                          <div class="lorem-section">
                            <span class="lorem-label">Lorem:  1.2.3.4</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Node 2 -->
                  <div class="node node-2" (mouseenter)="showNode2Tooltip = true" (mouseleave)="showNode2Tooltip = false">
                    <div class="node-icon server"></div>
                    <div class="node-label">Loremipsu</div>

                    <!-- Hover Card for Node 2 -->
                    <div class="tooltip-backdrop" *ngIf="showNode2Tooltip">
                      <div class="node-tooltip node-2-tooltip">
                        <div class="tooltip-header">
                          <div class="shield-icon-header">
                            <svg width="24" height="24" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="shield-icon-inline">
                              <circle cx="19.8448" cy="19.8448" r="19.845" fill="#D7EAFF"/>
                              <g clip-path="url(#clip0_26_588)">
                                <path d="M15.2036 15.1255H15.2118M15.2036 24.9693H15.2118M13.563 11.8443H26.688C27.5941 11.8443 28.3286 12.5788 28.3286 13.4849V16.7661C28.3286 17.6722 27.5941 18.4068 26.688 18.4068H13.563C12.6569 18.4068 11.9224 17.6722 11.9224 16.7661V13.4849C11.9224 12.5788 12.6569 11.8443 13.563 11.8443ZM13.563 21.688H26.688C27.5941 21.688 28.3286 22.4225 28.3286 23.3286V26.6099C28.3286 27.516 27.5941 28.2505 26.688 28.2505H13.563C12.6569 28.2505 11.9224 27.516 11.9224 26.6099V23.3286C11.9224 22.4225 12.6569 21.688 13.563 21.688Z" stroke="#1873DE" stroke-width="1.64062" stroke-linecap="round" stroke-linejoin="round"/>
                              </g>
                              <defs>
                                <clipPath id="clip0_26_588">
                                  <rect width="19.6875" height="19.6875" fill="white" transform="translate(10.282 10.2039)"/>
                                </clipPath>
                              </defs>
                            </svg>
                            <span class="node-title">Loremipsu</span>
                          </div>
                        </div>
                        <div class="tooltip-content">
                          <div class="info-section">
                            <div class="info-row">
                              <span class="info-icon">ðŸ“„</span>
                              <span class="info-text">Lorem: Loremipsum Loremipsum</span>
                              <span class="info-value blue">1.2.3.4</span>
                            </div>
                            <div class="version-row">
                              <span class="version-numbers blue">1.2.3.4</span>
                              <span class="version-text">Loremipsum</span>
                              <span class="version-numbers blue">1.2.3.4</span>
                              <span class="version-numbers blue">1.2.3.4</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Node 3 -->
                  <div class="node node-3" (mouseenter)="showNode3Tooltip = true" (mouseleave)="showNode3Tooltip = false">
                    <div class="node-icon server"></div>
                    <div class="node-label">Loremipsu</div>

                    <!-- Hover Card for Node 3 -->
                    <div class="tooltip-backdrop" *ngIf="showNode3Tooltip">
                      <div class="node-tooltip node-3-tooltip">
                        <div class="tooltip-header">
                          <div class="shield-icon-header">
                            <svg width="24" height="24" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="shield-icon-inline">
                              <circle cx="19.8448" cy="19.8448" r="19.845" fill="#D7EAFF"/>
                              <g clip-path="url(#clip0_26_588)">
                                <path d="M15.2036 15.1255H15.2118M15.2036 24.9693H15.2118M13.563 11.8443H26.688C27.5941 11.8443 28.3286 12.5788 28.3286 13.4849V16.7661C28.3286 17.6722 27.5941 18.4068 26.688 18.4068H13.563C12.6569 18.4068 11.9224 17.6722 11.9224 16.7661V13.4849C11.9224 12.5788 12.6569 11.8443 13.563 11.8443ZM13.563 21.688H26.688C27.5941 21.688 28.3286 22.4225 28.3286 23.3286V26.6099C28.3286 27.516 27.5941 28.2505 26.688 28.2505H13.563C12.6569 28.2505 11.9224 27.516 11.9224 26.6099V23.3286C11.9224 22.4225 12.6569 21.688 13.563 21.688Z" stroke="#1873DE" stroke-width="1.64062" stroke-linecap="round" stroke-linejoin="round"/>
                              </g>
                              <defs>
                                <clipPath id="clip0_26_588_node3">
                                  <rect width="19.6875" height="19.6875" fill="white" transform="translate(10.282 10.2039)"/>
                                </clipPath>
                              </defs>
                            </svg>
                            <span class="node-title">Loremipsu</span>
                          </div>
                        </div>
                        <div class="tooltip-content">
                          <div class="info-section">
                            <div class="info-row">
                              <span class="info-icon">ðŸ“„</span>
                              <span class="info-text">Lorem: Loremipsum Loremipsum</span>
                              <span class="info-value blue">1.2.3.4</span>
                            </div>
                            <div class="version-row">
                              <span class="version-numbers blue">1.2.3.4</span>
                              <span class="version-text">Loremipsum</span>
                              <span class="version-numbers blue">1.2.3.4</span>
                              <span class="version-numbers blue">1.2.3.4</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>


                  <!-- Node 4 -->
                  <div class="node node-4" (mouseenter)="showNode4Tooltip = true" (mouseleave)="showNode4Tooltip = false">
                    <div class="node-icon server">
                      <div class="status-indicator error"></div>
                    </div>
                    <div class="node-label">Loremipsumdolorsit</div>
                    <div class="node-ip">192.168.1.1</div>

                    <!-- Hover Card for Node 4 -->
                    <div class="tooltip-backdrop" *ngIf="showNode4Tooltip">
                      <div class="node-tooltip node-4-tooltip">
                        <div class="tooltip-header">
                          <div class="shield-icon-header">
                            <svg width="24" height="24" viewBox="0 0 59 59" fill="none" xmlns="http://www.w3.org/2000/svg" class="shield-icon-inline">
                              <circle cx="26.5" cy="31.9101" r="26.46" fill="#D7EAFF"/>
                              <path d="M19.5615 26.4298H19.5725M19.5615 37.2936H19.5725M17.374 22.8086H34.874C36.0821 22.8086 37.0615 23.6192 37.0615 24.6192V28.2405C37.0615 29.2405 36.0821 30.0511 34.874 30.0511H17.374C16.1659 30.0511 15.1865 29.2405 15.1865 28.2405V24.6192C15.1865 23.6192 16.1659 22.8086 17.374 22.8086ZM17.374 33.6724H34.874C36.0821 33.6724 37.0615 34.483 37.0615 35.483V39.1042C37.0615 40.1042 36.0821 40.9149 34.874 40.9149H17.374C16.1659 40.9149 15.1865 40.1042 15.1865 39.1042V35.483C15.1865 34.483 16.1659 33.6724 17.374 33.6724Z" stroke="#1873DE" stroke-width="1.81062" stroke-linecap="round" stroke-linejoin="round"/>
                              <rect x="37" y="-0.00012207" width="22" height="22" rx="11" fill="#E6372B"/>
                              <path d="M50.0623 9.43414L46.9373 12.8196M46.9373 9.43414L50.0623 12.8196M53.4998 11.8039C53.4998 15.1894 51.3123 16.8821 48.7123 17.8638C48.5761 17.9138 48.4282 17.9114 48.2935 17.8571C45.6873 16.8821 43.4998 15.1894 43.4998 11.8039V7.06435C43.4998 6.88478 43.5656 6.71256 43.6828 6.58558C43.8 6.4586 43.959 6.38727 44.1248 6.38727C45.3748 6.38727 46.9373 5.57477 48.0248 4.5456C48.1572 4.42305 48.3256 4.35571 48.4998 4.35571C48.6739 4.35571 48.8423 4.42305 48.9748 4.5456C50.0685 5.58154 51.6248 6.38727 52.8748 6.38727C53.0405 6.38727 53.1995 6.4586 53.3167 6.58558C53.4339 6.71256 53.4998 6.88478 53.4998 7.06435V11.8039Z" stroke="#FFF8F7" stroke-width="0.739568" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="node-title">Loremipsumdolorsit002</span>
                          </div>
                          <div class="node-ip-header">192.168.1.2</div>
                        </div>
                        <div class="tooltip-content">
                          <div class="info-section">
                            <div class="info-row">
                              <span class="info-icon">ðŸ“„</span>
                              <span class="info-text">Lorem:</span>
                              <span class="info-value highlight">Lorem "Ipsum"</span>
                            </div>
                            <div class="info-row">
                              <span class="info-text">Loremipsum</span>
                              <span class="info-value blue">Lorem 1234,5678</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Node 5 -->
                  <div class="node node-5" (mouseenter)="showNode5Tooltip = true" (mouseleave)="showNode5Tooltip = false">
                    <div class="node-icon server">
                      <div class="status-indicator error"></div>
                    </div>
                    <div class="node-label">Loremipsumdolorsit002</div>
                    <div class="node-ip">192.168.1.2</div>

                    <!-- Hover Card for Node 5 -->
                    <div class="tooltip-backdrop" *ngIf="showNode5Tooltip">
                      <div class="node-tooltip node-5-tooltip">
                        <div class="tooltip-header">
                          <div class="shield-icon-header">
                            <svg width="24" height="24" viewBox="0 0 59 59" fill="none" xmlns="http://www.w3.org/2000/svg" class="shield-icon-inline">
                              <circle cx="26.5" cy="31.9101" r="26.46" fill="#D7EAFF"/>
                              <path d="M19.5615 26.4298H19.5725M19.5615 37.2936H19.5725M17.374 22.8086H34.874C36.0821 22.8086 37.0615 23.6192 37.0615 24.6192V28.2405C37.0615 29.2405 36.0821 30.0511 34.874 30.0511H17.374C16.1659 30.0511 15.1865 29.2405 15.1865 28.2405V24.6192C15.1865 23.6192 16.1659 22.8086 17.374 22.8086ZM17.374 33.6724H34.874C36.0821 33.6724 37.0615 34.483 37.0615 35.483V39.1042C37.0615 40.1042 36.0821 40.9149 34.874 40.9149H17.374C16.1659 40.9149 15.1865 40.1042 15.1865 39.1042V35.483C15.1865 34.483 16.1659 33.6724 17.374 33.6724Z" stroke="#1873DE" stroke-width="1.81062" stroke-linecap="round" stroke-linejoin="round"/>
                              <rect x="37" y="-0.00012207" width="22" height="22" rx="11" fill="#E6372B"/>
                              <path d="M50.0623 9.43414L46.9373 12.8196M46.9373 9.43414L50.0623 12.8196M53.4998 11.8039C53.4998 15.1894 51.3123 16.8821 48.7123 17.8638C48.5761 17.9138 48.4282 17.9114 48.2935 17.8571C45.6873 16.8821 43.4998 15.1894 43.4998 11.8039V7.06435C43.4998 6.88478 43.5656 6.71256 43.6828 6.58558C43.8 6.4586 43.959 6.38727 44.1248 6.38727C45.3748 6.38727 46.9373 5.57477 48.0248 4.5456C48.1572 4.42305 48.3256 4.35571 48.4998 4.35571C48.6739 4.35571 48.8423 4.42305 48.9748 4.5456C50.0685 5.58154 51.6248 6.38727 52.8748 6.38727C53.0405 6.38727 53.1995 6.4586 53.3167 6.58558C53.4339 6.71256 53.4998 6.88478 53.4998 7.06435V11.8039Z" stroke="#FFF8F7" stroke-width="0.739568" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="node-title">Loremipsumdolorsit002</span>
                          </div>
                          <div class="node-ip-header">192.168.1.2</div>
                        </div>
                        <div class="tooltip-content">
                          <div class="info-section">
                            <div class="info-row">
                              <span class="info-icon">ðŸ“„</span>
                              <span class="info-text">Lorem:</span>
                              <span class="info-value highlight">Lorem "Ipsum"</span>
                            </div>
                            <div class="info-row">
                              <span class="info-text">Loremipsum</span>
                              <span class="info-value blue">Lorem 1234,5678</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Connection lines -->
                  <div class="connection connection-horizontal conn-1-2"></div>
                  <div class="connection connection-horizontal conn-2-3"></div>

                  <!-- Y-shaped connector from node 3 to both target nodes -->
                  <div class="y-connector">
                    <svg viewBox="0 0 200 160">
                      <!-- Main horizontal line from node 3 -->
                      <path
                        class="connector-path"
                        d="M 0 80 L 50 80"
                      />

                      <!-- Upper branch to node 4 -->
                      <path
                        class="connector-path"
                        d="M 50 80 L 100 30 L 200 30"
                      />

                      <!-- Lower branch to node 5 -->
                      <path
                        class="connector-path"
                        d="M 50 80 L 100 130 L 200 130"
                      />
                    </svg>
                  </div>

                  <!-- Arrows -->
                  <div class="arrow arrow-right arrow-1-2"></div>
                  <div class="arrow arrow-right arrow-2-3"></div>
                  <div class="arrow arrow-right arrow-to-4"></div>
                  <div class="arrow arrow-right arrow-to-5"></div>
                </div>

                <!-- Legend -->
                <div class="legend">
                  <div class="legend-item">
                    <div class="legend-icon error"></div>
                    <span class="legend-text error">Lorem</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-icon warning"></div>
                    <span class="legend-text warning">Lorem</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-icon success"></div>
                    <span class="legend-text success">Lorem</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Bottom row: assets list + contextual risk -->
            <!-- Section title above the cards -->
            <div class="section-title-container">
              <h3 class="section-title text-green">Lorem Ipsum Dolor Sit</h3>
            </div>

            <div class="bottom-row">
              <div class="card list-card">
                <div class="list-subheader">
                  <div class="col-asset">Asset</div>
                  <div class="col-risk">Contextual Risk</div>
                </div>
                <div class="list-body">
                  <div class="asset-row">
                    <div class="row-icon"></div>
                    <div class="asset-meta">
                      <div class="asset-name">Loremipsumdolorsit</div>
                      <div class="asset-ip">192.168.1.1</div>
                    </div>
                    <span class="badge critical">Critical</span>
                  </div>
                  <div class="asset-row">
                    <div class="row-icon"></div>
                    <div class="asset-meta">
                      <div class="asset-name">Loremipsumdolorsit002</div>
                      <div class="asset-ip">192.168.1.2</div>
                    </div>
                    <span class="badge critical">Critical</span>
                  </div>
                </div>
                <div class="list-footer">
                  <span class="pager"><i class="pi pi-angle-left"></i> Showing 1-2 of 2 <i class="pi pi-angle-right"></i></span>
                </div>
              </div>

              <div class="card risk-card">
                <div class="risk-content">
                  <div class="legend-section">
                    <div class="risk-header">Contextual Risk</div>
                    <ul class="risk-legend">
                      <li><span class="dot danger"></span> 2 Critical</li>
                      <li><span class="dot high"></span> 0 High</li>
                      <li><span class="dot medium"></span> 0 Medium</li>
                      <li><span class="dot low"></span> 0 Low</li>
                    </ul>
                  </div>
                  <div class="risk-donut">
                    <div class="donut-ring"></div>
                    <div class="donut-value">2</div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>
    </div>
  </main>

  <!-- Popover Component -->
  <app-popover></app-popover>
</div>
