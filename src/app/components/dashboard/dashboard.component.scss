// Global styles for this component
* {
  outline: none !important;
}

.text-green {
  color: #16A34A !important;
}

.dashboard-container {
  @apply flex h-screen bg-gray-50;

  .main-content {
    @apply flex-1 flex flex-col transition-all duration-300 ease-in-out;
    margin-left: 240px;

    &.sidebar-collapsed {
      margin-left: 72px;
    }

    .top-header {
      @apply bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between;

      .header-left {
        @apply flex items-center;

        .dashboard-title {
          @apply text-2xl font-bold text-gray-900;
        }
      }

      .header-right {
        @apply flex items-center;

        .header-stats {
          @apply flex items-center space-x-4;

          .stat-card {
            @apply bg-white border border-gray-200 rounded-lg px-4 py-3 text-center shadow-sm;

            .stat-number {
              @apply block text-xl font-bold text-blue-600;
            }

            .stat-label {
              @apply text-xs text-gray-500 font-medium;
            }

            &.critical {
              @apply border-red-200 bg-red-50;

              .stat-number {
                @apply text-red-600;
              }
            }
          }
        }
      }
    }

    .dashboard-content {
      @apply flex-1 p-5;
      display: flex;
      gap: 1rem;
      height: calc(100vh - 120px); /* Adjust based on header height */

      /* New layout */
      .left-column {
        flex: 1;
        overflow-y: auto;
        max-height: 100%;

        /* Hide scrollbar for webkit browsers (Chrome, Safari, Edge) */
        &::-webkit-scrollbar {
          width: 0px;
          background: transparent;
        }

        /* Hide scrollbar for Firefox */
        scrollbar-width: none;

        /* For Internet Explorer and Edge Legacy */
        -ms-overflow-style: none;

        .card.surface {
          @apply bg-white rounded-2xl shadow-sm border border-gray-200 p-6;
          /* Remove fixed height to allow natural scrolling */
          display: flex;
          flex-direction: column;

          .card-section {
            @apply mb-4;

            .section-title {
              /* Closer to mock: strong, compact title */
              font-size: 16px;
              font-weight: 700;
              line-height: 1.25;
              color: #0F172A; /* slate-900 */

              &.text-green {
                color: #16A34A; /* green-600 */
              }
            }

            .muted {
              /* Compact paragraph like the mock */
              font-size: 12.5px;
              line-height: 1.7;
              color: #6B7280; /* gray-500/600 */
            }
          }

          .divider { @apply h-px bg-gray-100 my-4; }

          .kv-list {
            @apply mt-2 border border-gray-100 rounded-xl divide-y divide-gray-100 bg-white;

            .kv-item { @apply flex justify-between items-center px-4 py-3; }
            .kv-item.full { @apply block px-4 py-3; }
            .kv-key { font-size: 13px; font-weight: 600; color: #374151; }
            .kv-val { font-size: 13px; color: #111827; }
          }

          /* Server Cards Section */
          .server-cards-section {
            @apply mt-6 space-y-4;

            .server-card {
              @apply bg-white rounded-lg p-4 border border-gray-200 shadow-sm;

              .server-card-header {
                @apply mb-3;

                .server-title {
                  @apply text-sm font-semibold text-gray-900 m-0;
                }
              }

              .server-card-wrapper {
                @apply border border-gray-300 rounded-lg p-3;

                .server-card-content {
                  @apply flex items-center;

                  .server-left {
                    @apply flex items-center space-x-3 flex-1;

                    .server-icon {
                      @apply flex-shrink-0;

                      svg {
                        @apply w-8 h-8;
                      }
                    }

                    .server-details {
                      @apply flex flex-col;

                      .server-type {
                        @apply text-sm font-medium text-gray-900;
                      }

                      .server-subtype {
                        @apply text-xs text-gray-500;
                      }
                    }
                  }

                  .server-divider {
                    @apply w-px bg-gray-300 h-12 mx-4 flex-shrink-0;
                  }

                  .server-right {
                    @apply flex-1;

                    .description-text {
                      @apply text-sm text-gray-600 leading-relaxed;
                    }
                  }
                }
              }
            }

            .server-text-section {
              @apply py-2;

              .server-description-text {
                @apply text-sm text-gray-600 leading-relaxed m-0;
              }
            }
          }
        }
      }

      .right-column {
        flex: 2;
        position: sticky;
        top: 0;
        height: fit-content;
        max-height: calc(100vh - 120px);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;

        /* Hide scrollbar for webkit browsers (Chrome, Safari, Edge) */
        &::-webkit-scrollbar {
          width: 0px;
          background: transparent;
        }

        /* Hide scrollbar for Firefox */
        scrollbar-width: none;

        /* For Internet Explorer and Edge Legacy */
        -ms-overflow-style: none;

        .card {
          @apply bg-white rounded-2xl shadow-sm border border-gray-200;
          outline: none !important;

          &:focus, &:focus-within {
            outline: none !important;
          }
        }

        /* Global text-green class for this component */
        .text-green {
          color: #02983E !important;
          margin-bottom: 20px;
          font-weight: 700;
          font-style: Bold;
          font-size: 20px;
          line-height: 22px;
          letter-spacing: 1%;
          text-transform: capitalize;
        }

        .graph-card {
          @apply p-0 mb-5 overflow-hidden;
          outline: none !important;
          border: none !important;

          *, *:focus, *:focus-within {
            outline: none !important;
          }

          .card-section {
            padding: 1rem 1.25rem 0.5rem;

            .panel-title {
              font-weight: 700 !important;
              font-size: 18px !important;
              color: #16A34A !important;
              margin: 0 !important;
              line-height: 1.25 !important;
            }
          }

          .graph-canvas {
            @apply p-3;
            background: #F8FAFC;
            border: 1px solid #E5E7EB;
            margin: 0 12px;
            border-radius: 14px;

            .diagram { width: 100%; height: 260px; display: block; }
            .legend.inside { @apply flex items-center gap-3 px-4 py-3; }
          }

          /* Inline HTML/SCSS flow diagram (no SVG, no popover) */
          .graph-canvas {
            position: relative;
          }
          .graph-canvas .flow-frame { background:#F8FAFC; border-radius:16px; }
          .graph-canvas .flow-diagram { position: relative; height: 260px; padding: 10px 16px; }
          .graph-canvas .lane { display:flex; align-items:center; gap: 32px; position: absolute; left: 56px; right: 56px; top: 86px; }

          /* Nodes */
          .graph-canvas .node { width:56px; height:56px; border-radius:9999px; position:relative; box-shadow: inset 0 1px 0 rgba(255,255,255,.7); }
          .graph-canvas .node.pink { width:72px; height:72px; background:#FEE2E2; border:1px solid #FECACA; box-shadow: 0 0 0 12px rgba(254,226,226,.45), inset 0 1px 0 rgba(255,255,255,.7); }
          .graph-canvas .node.blue { background:#DBEAFE; border:1px solid #93C5FD; }
          .graph-canvas .node .device { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:24px; height:16px; border-radius:3px; background:#60A5FA; box-shadow: inset 0 0 0 2px #E8F2FF; }
          .graph-canvas .node .device::after { content:""; position:absolute; left:6px; right:6px; top:4px; height:2px; background:#E8F2FF; box-shadow: 0 4px 0 #93C5FD; }

          /* Badges */
          .graph-canvas .mini-badge { position:absolute; right:-6px; top:-8px; width:22px; height:22px; border-radius:9999px; background:#7C3AED; color:#fff; display:flex; align-items:center; justify-content:center; font-size:12px; }
          .graph-canvas .has-badge::after { content:"!"; position:absolute; right:-12px; top:-12px; width:26px; height:26px; border-radius:9999px; background:#EF4444; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:12px; }

          /* Straight arrows */
          .graph-canvas .arrow { flex:0 0 88px; height:0; border-top:1.5px solid #94A3B8; position:relative; }
          .graph-canvas .arrow::after { content:""; position:absolute; right:-9px; top:-5px; border-left:9px solid #94A3B8; border-top:6px solid transparent; border-bottom:6px solid transparent; }

          /* Split branches */
          .graph-canvas .split { position: relative; width: 150px; height: 90px; }
          .graph-canvas .branch { position:absolute; right:0; width:140px; height:54px; border-right:1.5px solid #94A3B8; border-top-right-radius:54px; }
          .graph-canvas .branch.up { top:-6px; border-top:1.5px solid #94A3B8; }
          .graph-canvas .branch.down { bottom:-6px; border-bottom:1.5px solid #94A3B8; }
          .graph-canvas .branch.up::after, .graph-canvas .branch.down::after { content:""; position:absolute; right:-9px; top:-6px; border-left:9px solid #94A3B8; border-top:6px solid transparent; border-bottom:6px solid transparent; }
          .graph-canvas .branch.down::after { top:auto; bottom:-6px; }

          /* Targets */
          .graph-canvas .targets { position:absolute; right:56px; top: 28px; display:grid; gap:64px; }
          .graph-canvas .target { display:flex; flex-direction:column; align-items:flex-start; }
          .graph-canvas .t-label { font-size:14px; color:#334155; margin-top:8px; }
          .graph-canvas .t-ip { font-size:12px; color:#94A3B8; }

          /* Bottom divider + legend */
          .graph-canvas .divider { height:1px; background:#E5E7EB; margin: 198px 8px 8px; }
          .graph-canvas .legend { display:flex; align-items:center; gap:20px; padding: 8px 12px; }

          /* Diagram container styles (updated as requested) */
          .diagram-container { position:relative; width:100%; max-width:1100px; margin:0 auto; background:#ffffff; padding:10px 20px; border-radius:16px; box-shadow:0 10px 25px -5px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); min-height:400px; }
          .diagram-title { font-size:28px; font-weight:700; color:#10b981; margin-bottom:60px; letter-spacing:-0.025em; }
          .nodes-container { position:relative; height:350px; width:100%; }

          /* Unified network diagram container - groups all nodes and connections */
          .network-diagram-container {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease-in-out;
          }

          /* Move entire network diagram when sidebar is collapsed */
          .network-diagram-container.sidebar-collapsed {
            transform: translateX(-168px); /* Move entire diagram left by sidebar width difference */
          }
          .node { position:absolute; display:flex; flex-direction:column; align-items:center; gap:12px; z-index:10; }
          .node-icon { position:relative; width:70px; height:70px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:#dbeafe; border:3px solid #3b82f6; box-shadow:0 4px 12px rgba(59,130,246,0.15); transition:all .2s ease; color:#3b82f6; }
          .node-icon:hover { transform: translateY(-2px); box-shadow:0 8px 20px rgba(59,130,246,0.25); }
          .node-icon.user { background:#f3e8ff; border:3px solid #8b5cf6; box-shadow:0 4px 12px rgba(139,92,246,0.15); color:#8b5cf6; }
          .node-icon.user:hover { box-shadow:0 8px 20px rgba(139,92,246,0.25); }
          .node-icon::before { content:""; width:30px; height:30px; background-color: currentColor; -webkit-mask-size:contain; mask-size:contain; -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat; -webkit-mask-position:center; mask-position:center; }
          .node-icon.user::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'/%3E%3C/svg%3E"); }
          .node-icon.server::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01'/%3E%3C/svg%3E"); }
          .status-indicator { position:absolute; top:-8px; right:-8px; width:24px; height:24px; border-radius:50%; border:3px solid #ffffff; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 8px rgba(0,0,0,0.15); }
          .status-indicator.error { background:#ef4444; }
          .status-indicator.success { background:#10b981; }
          .status-indicator::before { content:""; width:10px; height:10px; background:#ffffff; -webkit-mask-size:contain; mask-size:contain; -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat; -webkit-mask-position:center; mask-position:center; }
          .status-indicator.error::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 18L18 6M6 6l12 12'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 18L18 6M6 6l12 12'/%3E%3C/svg%3E"); }
          .status-indicator.success::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M5 13l4 4L19 7'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M5 13l4 4L19 7'/%3E%3C/svg%3E"); }
          .node-label { font-size:15px; font-weight:600; color:#475569; white-space:nowrap; text-align:center; letter-spacing:-0.025em; margin-top: -10px; }
          .node-ip { font-size:11px; color:#94a3b8; font-weight:500; text-align:center; margin-top: -15px; }

          /* Node positioning - matching the uploaded image layout */
          .node-1 { top:80px; left:30px; }    /* Loremipsumm (leftmost) */
          .node-2 { top:80px; left:200px; }   /* Loremipsu (center-left) */
          .node-3 { top:80px; left:360px; }   /* Loremipsu (center-right) */

          .node-4 { top:20px; right:40px; }   /* Loremipsumdolorsit (top-right) - aligns with Y upper branch */
          .node-5 { top:160px; right:40px; }  /* Loremipsumdolorsit002 (bottom-right) - aligns with Y lower branch */



          /* Connection lines */
          .connection { position:absolute; background:#cbd5e1; z-index:1; }
          .connection-horizontal { height:1px; border-radius:2px; }
          .connection-vertical { width:3px; border-radius:2px; }
          .connection-branch { background:#cbd5e1; border-radius:2px; }

          /* Straight connections between first 3 nodes */
          .conn-1-2 { top:114px; left:120px; width:60px; }   /* Loremipsumm → Loremipsu (with spacing) */
          .conn-2-3 { top:114px; left:280px; width:60px; }   /* Loremipsu → Loremipsu (with spacing) */

          /* Y-shaped connector from node 3 to both target nodes - Clean Y Design */
          .y-connector {
            position: absolute;
            top: 54px;
            left: 425px;
            width: 145px;
            height: 122px;
            z-index: 1;
            transform: rotate(90deg);
          }



          /* Y-stem (main horizontal line from node 3) */
          .y-stem {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 24px;
            background-color: #cbd5e1;
            border-radius: 1px;
          }

          /* Y-branch base styling */
          .y-branch {
            position: absolute;
            top: 10px;
            width: 2px;
            height: 90px;
            background-color: #cbd5e1;
            border-radius: 1px;
            transform-origin: bottom center;
          }

          /* Left branch (upper in rotated view) */
          .y-left {
            left: 50%;
            transform:
              translateX(-90%)
              rotate(-30deg)
              skewX(-10deg);
          }

          /* Right branch (lower in rotated view) */
          .y-right {
            right: 50%;
            transform:
              translateX(90%)
              rotate(30deg)
              skewX(10deg);
          }








          /* Arrows */
          .arrow { position:absolute; width:0; height:0; z-index:5; }
          .arrow-right { border-left:10px solid #cbd5e1; border-top:5px solid transparent; border-bottom:5px solid transparent; }
          .arrow-1-2 { top:109px; left:170px; }   /* Arrow between Loremipsumm → Loremipsu */
          .arrow-2-3 { top:109px; left:330px; }   /* Arrow between Loremipsu → Loremipsu */
          .arrow-to-4 { top:49px; right:130px; }   /* Arrow to top-right node */
          .arrow-to-5 { top:189px; right:130px; }  /* Arrow to bottom-right node */



          /* Legend */
          .legend {
            // position:absolute;
            bottom:50px;
            left:50px;
            display:flex;
            gap:40px;
            border-top: 1px solid #E5E7EB;
            padding-top: 20px;
            margin-top: 20px;
          }
          .legend-item { display:flex; align-items:center; gap:10px; font-size:15px; font-weight:600; }
          .legend-icon { width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 2px 4px rgba(0,0,0,0.1); color:#fff; }
          .legend-icon.error { background:#ef4444; }
          .legend-icon.warning { background:#f59e0b; }
          .legend-icon.success { background:#10b981; }
          .legend-icon::before { content:""; width:10px; height:10px; background: currentColor; -webkit-mask-size:contain; mask-size:contain; -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat; -webkit-mask-position:center; mask-position:center; }
          .legend-icon.error::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 18L18 6M6 6l12 12'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 18L18 6M6 6l12 12'/%3E%3C/svg%3E"); }
          .legend-icon.warning::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z'/%3E%3C/svg%3E"); }
          .legend-icon.success::before { -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M5 13l4 4L19 7'/%3E%3C/svg%3E"); mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M5 13l4 4L19 7'/%3E%3C/svg%3E"); }
          .legend-text.error { color:#ef4444; }
          .legend-text.warning { color:#f59e0b; }
          .legend-text.success { color:#10b981; }

          /* Node Tooltip Styles */
          .tooltip-backdrop {
            position: fixed;
            top: 33%;
            left: 50%;
            right: auto;
            bottom: auto;
            background: rgba(0, 0, 0, 0.1);
            z-index: 10000;
            display: block;
            border-radius: 16px;
          }

          /* Specific positioning for Node 2 tooltip */
          .node-2 .tooltip-backdrop {
            top: 33%;
            left: 65%;
            transform: translateX(-50%);
          }

            .node-tooltip {
              background: white;
              border-radius: 16px;
              box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
              // padding: 24px;
              padding: 16px 24px;
              min-width: 450px;
              border: 1px solid #E5E7EB;
              position: relative;

              .tooltip-header {
                // margin-bottom: 20px;
                margin-bottom: 10px;

                h4 {
                  margin: 0;
                  font-size: 18px;
                  font-weight: 600;
                  color: #E5372B;
                  background: #FFF1F0;
                }
              }

              .tooltip-content {
                .version-grid {
                  display: grid;
                  grid-template-columns: repeat(3, 1fr);
                  gap: 5px;
                  margin-bottom: 10px;
                  padding-left: 20px;
                  padding-right: 20px;

                  .version-item {
                    padding: 0;
                    font-size: 16px;
                    font-weight: 500;
                    text-align: center;

                    &.red {
                      color: #E5372B;
                      background: #FFF1F0;
                      border: none;
                    }
                  }
                }

                .lorem-section {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  font-size: 16px;

                  .lorem-label {
                    color: #6366F1;
                    background: #F2EDFF;
                    font-weight: 500;
                  }

                  .lorem-value {
                    color: #6366F1;
                    font-weight: 500;
                    background: #F2EDFF;
                  }
                }
              }
            }

            /* Specific styling for Node 2 tooltip */
            &.node-2-tooltip {
              min-width: 320px;
              padding: 20px;

              .tooltip-header {
                margin-bottom: 16px;

                .server-icon-header {
                  display: flex;
                  align-items: center;
                  gap: 12px;

                  .server-icon-small {
                    width: 32px;
                    height: 32px;
                    background: #DBEAFE;
                    border: 1px solid #93C5FD;
                    border-radius: 8px;
                    position: relative;

                    &::after {
                      content: "";
                      position: absolute;
                      left: 50%;
                      top: 50%;
                      transform: translate(-50%, -50%);
                      width: 16px;
                      height: 12px;
                      background: #60A5FA;
                      border-radius: 2px;
                      box-shadow: inset 0 0 0 2px #E8F2FF;
                    }

                    &::before {
                      content: "";
                      position: absolute;
                      left: 50%;
                      top: 60%;
                      transform: translateX(-50%);
                      width: 8px;
                      height: 2px;
                      background: #E8F2FF;
                      box-shadow: 0 3px 0 #93C5FD;
                    }
                  }

                  .server-info {
                    h4 {
                      margin: 0;
                      font-size: 16px;
                      font-weight: 600;
                      color: #111827;
                      background: none;
                    }

                    .ip-address {
                      font-size: 14px;
                      color: #6B7280;
                      display: block;
                      margin-top: 2px;
                    }
                  }
                }
              }

              .tooltip-content {
                .info-row {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  margin-bottom: 12px;
                  font-size: 14px;

                  &:last-child {
                    margin-bottom: 0;
                  }

                  .info-icon {
                    font-size: 16px;
                  }

                  .info-label {
                    color: #6B7280;
                    font-weight: 500;
                  }

                  .info-value {
                    font-weight: 600;

                    &.highlight {
                      color: #D97706;
                    }

                    &.blue {
                      color: #2563EB;
                    }
                  }
                }
              }
            }
          // }

          /* Ensure node positioning is not affected by tooltip */
          .nodes-container {
            position: relative;

            .node {
              position: absolute;
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 12px;
              z-index: 10;
            }

            .node-icon-svg {
              display: flex;
              align-items: center;
              justify-content: center;
              width: 64px;
              height: 64px;

              svg {
                width: 64px;
                height: 64px;
                margin-left: -30px
              }
            }
          }



          /* keep legend styles for chips */
          .legend .chip { @apply inline-flex items-center gap-2 text-xs font-medium; color: #111827; }
          .legend .dot { @apply inline-block rounded-full; width: 10px; height: 10px; }
          .legend .dot.danger { background: #EF4444; }
          .legend .dot.warning { background: #F59E0B; }
          .header-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }

          /* Popover diagram styles */
          :host ::ng-deep .p-popover {
            .popover-flow { width: 900px; }
            .flow-frame { background:#F8FAFC; border:1px solid #E5E7EB; border-radius:16px; padding:16px; }
            .flow-diagram { position: relative; height: 260px; padding: 8px 12px; }
            .lane { display:flex; align-items:center; gap: 24px; position: absolute; left: 40px; right: 40px; top: 70px; }

            .node { width: 64px; height: 64px; border-radius: 9999px; position: relative; box-shadow: inset 0 1px 0 rgba(255,255,255,.6); }
            .node.pink { background:#FEE2E2; border:1px solid #FECACA; }
            .node.blue { background:#DBEAFE; border:1px solid #93C5FD; }
            .node.blue::before { content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:22px; height:16px; border-radius:3px; background:#60A5FA; box-shadow: inset 0 0 0 2px #E8F2FF; }
            .mini-badge { position:absolute; right:-4px; top:-6px; width:22px; height:22px; border-radius:9999px; background:#7C3AED; color:#fff; display:flex; align-items:center; justify-content:center; font-size:12px; }
            .has-badge::after { content:"!"; position:absolute; right:-10px; top:-10px; width:24px; height:24px; border-radius:9999px; background:#EF4444; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:12px; }

            .arrow { flex: 0 0 80px; height: 0; border-top: 2px solid #94A3B8; position: relative; }
            .arrow::after { content:""; position:absolute; right:-8px; top:-5px; border-left:8px solid #94A3B8; border-top:6px solid transparent; border-bottom:6px solid transparent; }

            .split { position: relative; width: 110px; height: 80px; }
            .branch { position:absolute; right:0; width:100px; height:40px; border-right:2px solid #94A3B8; border-top-right-radius:40px; }
            .branch.up { top:0; border-top:2px solid #94A3B8; }
            .branch.down { bottom:0; border-bottom:2px solid #94A3B8; }
            .branch.up::after, .branch.down::after { content:""; position:absolute; right:-8px; top:-6px; border-left:8px solid #94A3B8; border-top:6px solid transparent; border-bottom:6px solid transparent; }
            .branch.down::after { top:auto; bottom:-6px; }

            .targets { position:absolute; right:40px; top: 40px; display:grid; gap: 40px; }
            .target { display:flex; flex-direction:column; align-items:flex-start; }
            .t-label { font-size:14px; color:#334155; margin-top:8px; }
            .t-ip { font-size:12px; color:#94A3B8; }

            .divider { height:1px; background:#E5E7EB; margin: 200px 8px 8px; }
            .legend { display:flex; align-items:center; gap:16px; padding: 8px 12px; }
            .legend .chip { display:inline-flex; align-items:center; gap:8px; font-size:12px; color:#111827; }
            .legend .dot { width:10px; height:10px; border-radius:9999px; display:inline-block; }
            .legend .dot.danger{ background:#EF4444; } .legend .dot.warning{ background:#F59E0B; } .legend .dot.success{ background:#10B981; }
          }
          .legend .dot.success { background: #10B981; }
        }

        /* Node 2 Tooltip Styling */
        .node-2-tooltip {
          width: 100% !important;
          min-width: 250px !important;
          .shield-icon-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;

            .shield-icon-inline {
              width: 24px;
              height: 24px;
              flex-shrink: 0;
            }

            .node-title {
              font-size: 1rem;
              font-weight: 600;
              color: #6B7280;
              margin: 0;
            }
          }

          .info-section {
            .info-row {
              display: flex;
              align-items: center;
              gap: 0.5rem;

              .info-icon {
                font-size: 14px;
                flex-shrink: 0;
              }

              .info-text {
                color: #6B7280;
                font-size: 0.875rem;
                white-space: nowrap;
              }

              .info-value.blue {
                color: #6236CC;
                font-weight: 600;
                font-size: 0.875rem;
                background: #F2EDFF;
                padding: 2px 6px;
                border-radius: 4px;
                white-space: nowrap;
              }
            }

            .version-row {
              display: flex;
              align-items: center;
              gap: 0.25rem;
              flex-wrap: wrap;
              margin-top: 0.25rem;

              .version-numbers.blue {
                color: #6236CC;
                font-weight: 600;
                font-size: 0.875rem;
                background: #F2EDFF;
                padding: 2px 6px;
                border-radius: 4px;
                white-space: nowrap;
              }

              .version-text {
                color: #6236CC;
                font-size: 0.875rem;
                white-space: nowrap;
              }
            }
          }
        }

        .node-3 .tooltip-backdrop {
            top: 33%;
            left: 70%;
            transform: translateX(-50%);
          }

        .node-4 .tooltip-backdrop {
            top: 1%;
            left: 77%;
            transform: translateX(-50%);
          }

        .node-5 .tooltip-backdrop {
            top: 30%;
            left: 80%;
            transform: translateX(-50%);
          }

        /* Node 3 Tooltip Styling */
        .node-3-tooltip {
          width: 100% !important;
          min-width: 250px !important;
          position: relative;
          // left: 15% !important;

          .shield-icon-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;

            .shield-icon-inline {
              width: 24px;
              height: 24px;
              flex-shrink: 0;
            }

            .node-title {
              font-size: 1rem;
              font-weight: 600;
              color: #6B7280;
              margin: 0;
            }
          }

          .info-section {
            .info-row {
              display: flex;
              align-items: center;
              gap: 0.5rem;
              .info-icon {
                font-size: 14px;
                flex-shrink: 0;
              }

              .info-text {
                color: #6B7280;
                font-size: 0.875rem;
                white-space: nowrap;
              }

              .info-value.blue {
                color: #6236CC;
                font-weight: 600;
                font-size: 0.875rem;
                background: #F2EDFF;
                padding: 2px 6px;
                border-radius: 4px;
                white-space: nowrap;
              }
            }

            .version-row {
              display: flex;
              align-items: center;
              gap: 0.25rem;
              flex-wrap: wrap;
              margin-top: 0.25rem;

              .version-numbers.blue {
                color: #6236CC;
                font-weight: 600;
                font-size: 0.875rem;
                background: #F2EDFF;
                padding: 2px 6px;
                border-radius: 4px;
                white-space: nowrap;
              }

              .version-text {
                color: #6236CC;
                font-size: 0.875rem;
                white-space: nowrap;
              }
            }
          }
        }

        /* Node 4 Tooltip Styling */
        .node-4-tooltip {
          width: 100% !important;
          min-width: 280px !important;
          position: relative;

          .shield-icon-header {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1rem;

            .shield-icon-inline {
              width: 32px;
              height: 32px;
              flex-shrink: 0;
              margin-top: 2px;
            }

            .node-info {
              display: flex;
              flex-direction: column;
              gap: 0.25rem;

              .node-title {
                font-size: 1rem;
                font-weight: 600;
                color: #111827;
                margin: 0;
                line-height: 1.2;
              }

              .node-ip-header {
                font-size: 0.875rem;
                color: #6B7280;
                margin: 0;
                line-height: 1.2;
              }
            }
          }

          .tooltip-content {
            .info-section {
              .info-row {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 8px;
                font-size: 14px;

                &:last-child {
                  margin-bottom: 0;
                }

                .info-icon {
                  font-size: 16px;
                }

                .info-text {
                  color: #6B7280;
                  font-weight: 500;
                }

                .info-value {
                  font-weight: 600;

                  &.highlight {
                    color: #D97706;
                  }

                  &.blue {
                    color: #2563EB;
                  }
                }
              }
            }
          }
        }

        /* Node 5 Tooltip Styling */
        .node-5-tooltip {
          width: 100% !important;
          min-width: 280px !important;
          position: relative;

          .shield-icon-header {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1rem;

            .shield-icon-inline {
              width: 32px;
              height: 32px;
              flex-shrink: 0;
              margin-top: 2px;
            }

            .node-info {
              display: flex;
              flex-direction: column;
              gap: 0.25rem;

              .node-title {
                font-size: 1rem;
                font-weight: 600;
                color: #111827;
                margin: 0;
                line-height: 1.2;
              }

              .node-ip-header {
                font-size: 0.875rem;
                color: #6B7280;
                margin: 0;
                line-height: 1.2;
              }
            }
          }

          .tooltip-content {
            .info-section {
              .info-row {
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 8px;
                font-size: 14px;

                &:last-child {
                  margin-bottom: 0;
                }

                .info-icon {
                  font-size: 16px;
                }

                .info-text {
                  color: #6B7280;
                  font-weight: 500;
                }

                .info-value {
                  font-weight: 600;

                  &.highlight {
                    color: #D97706;
                  }

                  &.blue {
                    color: #2563EB;
                  }
                }
              }
            }
          }
        }

        /* Section title above cards */
        .section-title-container {
          margin-bottom: 1rem;

          .section-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: #16A34A !important;
            margin: 0;
            line-height: 1.25;
          }
        }

        .bottom-row {
          display: grid;
          grid-template-columns: 1fr 1fr; /* Equal width columns */
          gap: 1rem;
          align-items: stretch; /* Make both cards same height */

          .list-card, .risk-card {
            display: flex;
            flex-direction: column;
            height: 100%; /* Ensure full height */
          }

          .list-card {
            padding: 0;
            overflow: hidden;

            .list-header { @apply px-4 pt-4 pb-2 border-b border-gray-100; }
            .list-header h3 { font-size: 14px; font-weight: 700; color: #16A34A; }

            .list-subheader {
              display: grid;
              grid-template-columns: 1fr auto;
              align-items: center;
              padding: 8px 20px;
              font-size: 11px;
              color: #6B7280; /* gray-500 */
              border-bottom: 1px solid #F3F4F6;

              .col-asset { justify-self: start; }
              .col-risk { justify-self: end; }
            }

            .list-body {
              flex: 1; /* Take up remaining space */
              border-bottom: 1px solid #F3F4F6;
            }
            .asset-row {
              display: flex;
              align-items: center;
              justify-content: space-between;
              padding: 12px 16px;
              border-bottom: 1px solid #F3F4F6;

              &:last-child {
                border-bottom: none;
              }
            }
            .row-icon { width: 28px; height: 28px; border-radius: 8px; margin-right: 12px; background: #E0F2FE; border: 1px solid #BAE6FD; box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); }
            .asset-meta {
              display: flex;
              flex-direction: column;
              flex: 1;
            }
            .asset-name { font-size: 13px; font-weight: 600; color: #111827; }
            .asset-ip { font-size: 11px; color: #6B7280; }
            .badge { font-size: 11px; font-weight: 700; padding: 4px 10px; border-radius: 9999px; border: 1px solid #FECACA; background: #FEE2E2; color: #DC2626; }

            .list-footer {
              padding: 0.75rem;
              font-size: 0.75rem;
              color: #6B7280;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 0.5rem;
              border-top: 1px solid #F3F4F6;
              margin-top: auto; /* Push to bottom */
            }
          }

          .risk-card {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            height: 100%; /* Ensure equal height */

            .risk-content {
              display: flex;
              align-items: center;
              justify-content: space-between;
              flex: 1;
              gap: 0.25rem; /* Even smaller gap for more room */
            }

            .legend-section {
              flex: 1;

              .risk-header {
                font-size: 1rem;
                font-weight: 600;
                color: #111827;
                margin-bottom: 0.75rem;
                text-align: left; /* Align with legend items */
              }
            }

            .risk-legend {
              font-size: 0.875rem;
              color: #6B7280;
              list-style: none;
              padding: 0;
              margin: 0;

              li {
                display: flex;
                align-items: center;
                margin-bottom: 0.5rem;

                &:last-child {
                  margin-bottom: 0;
                }
              }

              .dot {
                display: inline-block;
                width: 10px;
                height: 10px;
                border-radius: 50%;
                margin-right: 0.5rem;
              }
            }

            .dot.danger { background-color: #DC2626; }
            .dot.high { background-color: #EA580C; }
            .dot.medium { background-color: #CA8A04; }
            .dot.low { background-color: #16A34A; }

            .risk-donut {
              position: relative;
              display: flex;
              align-items: center;
              justify-content: center;
              flex-shrink: 0;
            }

            .donut-ring {
              border-radius: 50%;
              width: 140px;
              height: 140px;
              border: 10px solid #DC2626;
              background: white;
            }

            .donut-value {
              position: absolute;
              font-size: 42px;
              font-weight: 600;
              color: #1F2937;
            }
          }
        }
      }
    }
  }
}

// Responsive design
@media (max-width: 1024px) {
  .dashboard-container {
    .main-content {
      margin-left: 80px;

      .dashboard-content {
        flex-direction: column;
        height: auto;

        .left-column {
          flex: none;
          overflow-y: visible;
          max-height: none;
        }

        .right-column {
          position: static;
          flex: none;
          max-height: none;
          height: auto;
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .dashboard-container {
    .main-content {
      margin-left: 0;

      .top-header {
        @apply px-4 py-3 flex-col items-start space-y-3;

        .header-right {
          @apply w-full;

          .header-stats {
            @apply space-x-3;

            .stat-card {
              @apply px-3 py-2;

              .stat-number {
                @apply text-lg;
              }
            }
          }
        }
      }

      .dashboard-content {
        padding: 1rem;
        gap: 1rem;
        flex-direction: column;
        height: auto;

        .left-column {
          flex: none;
          overflow-y: visible;
          max-height: none;
        }

        .right-column {
          position: static;
          flex: none;
          max-height: none;
          height: auto;
        }
      }
    }
  }
}
